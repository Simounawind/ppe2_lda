# Semaine 6



### 2023.03.29

**Xiaohua : ** <u>Avantage</u> de yield

Pendant le cours, on a étudié les scrpits du prof, qui utilise la fonction yield pour renvoyer un generateur. Par rapport à la fonction returnliste, c'est plus efficace et rapide.

Mais les scripts ne sont pas faciles à comprendre donc il faut du temps pour les apprendre et les concaténer avec les miens, comme c'est pas un copier-coller, pas tellement simple o(╥﹏╥)o.



### 2023.03.31

**Xiaohua : ** J'ai fait une comparaison entre mes scripts et ceux avec yield pour voir la différence. J'utilise time pour regarder leur vitesse : 

`/Users/xiaohua/opt/anaconda3/envs/macrun/bin/python3 pluri_extraire_xml.py     0.12s user 0.15s system 98% cpu 0.268 total `

`/Users/xiaohua/opt/anaconda3/envs/macrun/bin/python3 extract_many_base.py -m   0.05s user 0.02s system 78% cpu 0.083 total`

Donc le deuxième, avec la fonction yield, semble plus rapide et moins vorace au CPU. 

Ainsi, j'ai amélioré mes scripts d'après les contenus dans les corrigés. Mais j'ai aussi gardé les miens dans le dossier original scripts. Dans le nouveau script multi, (autrefois les fonctions souvent renvoie tout dans une liste, maintenant ils renvoyent les générateurs qui donnent les données avec des itérations.)

<u>Problèmes rencontrés :</u> 

1. Difficile de savoir quelles parties à garder et à remplacer.

2. Ne savoir pas la nature des résultats d'un générateur

   - J'ai utilisé la fonction next et type pour les identifier

3. Il y a des articles bien particuliers : Ayant marché le scrpit sur des articles d'une période de 2 jours, j'ai élargi ma plage de recherche pour essayer de trouver des articles sur une période de trois mois, mais j'ai découvert que la variable "desc" est parfois "NoneType". Pour résoudre ce problème, je limite la période peu à peu pour trouver le texte brut: 

   ![image-20230331192740613](../../../../../Library/Mobile Documents/iCloud~md~obsidian/Documents/学习笔记/总附件/image-20230331192740613.png)

   Il y a des descriptions vides. Donc j'ai ajouté un `if title and desc is not None:`

Pour les exos de Xquery et d'annotations, il faut encore du temps.

 
